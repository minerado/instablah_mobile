{% extends "base.html"%}
{% block main %}
    


    {% for post in posts.models %}

        {% set feature = post.payload %}
        {% set richcontent = post.richcontent %}

        {% if not feature and not richcontent %}
            {% set post_type = 'text' %}
        {% elif not feature and richcontent %}
            {% set post_type = 'long_post' %}
        {% elif not feature.is_image and not feature.is_video %}
            {% set post_type = 'link' %}
        {% elif feature.is_image %}
            {% set post_type = 'image' %}
        {% elif feature.is_video %}
            {% set post_type = 'video' %}
        {% else %}
            {% set post_type = 'impossible' %}
        {% endif %}

        {% if not post.richcontent %}
        <div class="posts-container">
            <!-- Test reasons -->
            <div class="test-code">
              
            </div>
            <!-- /Test reasons -->
            <div class="post">
              {% include "/partials/post_header.html" %}
              <div class="post-content">
                {% if post_type == "image" %}
                    {% include "/partials/post_image.html" %}
                {% elif post_type == "video" %}
                    {% include "/partials/post_video.html" %}
                {% elif post_type == "link" %}
                    {% include "/partials/post_link.html" %}
                {% endif %}
                     
                {% if post.title or post.text %}
                    {% include "/partials/post_text.html" %}
                {% endif %}
              </div>
              
              <div class="post-related blue">
                {% for related in post.relateds %}
                    <span>#{{ related.name }}</span>
                {% endfor %}
              </div>
              
            </div>
        </div>
        {% endif %}
    {% endfor %}
{% endblock %}
